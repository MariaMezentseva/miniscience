import gmsh
import math
import sys

gmsh.initialize()
gmsh.model.add('lab1.2')

gmsh.merge('C:/Users/Мария/Desktop/lab1/lab1.2/Ditto.stl')
gmsh.model.mesh.createGeometry()
gmsh.model.mesh.setCompound(2, gmsh.model.getEntities(2))

angle = 40

forceParametrizablePatches = False
includeBoundary = True
curveAngle = 180

gmsh.model.mesh.classifySurfaces(angle * math.pi / 180., includeBoundary, forceParametrizablePatches, curveAngle * math.pi / 180.)

s = gmsh.model.getEntities(2)
l = gmsh.model.geo.addSurfaceLoop([s[i][1] for i in range(len(s))])
gmsh.model.geo.addVolume([l])

gmsh.model.geo.synchronize()

gmsh.model.mesh.generate(3)
gmsh.write('lab1.2.msh')

if '-nopopup' not in sys.argv:
    gmsh.fltk.run()

gmsh.finalize()
